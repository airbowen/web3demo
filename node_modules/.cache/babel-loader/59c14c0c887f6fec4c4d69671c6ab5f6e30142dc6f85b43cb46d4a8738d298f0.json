{"ast":null,"code":"import _regeneratorRuntime from \"/Users/bowensong/Desktop/\\u524D\\u7AEF\\u4EE3\\u7801/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/bowensong/Desktop/\\u524D\\u7AEF\\u4EE3\\u7801/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport { ref, onMounted, computed } from \"vue\";\nimport Web3 from \"web3\";\nimport mtcJSON from \"./contracts/MyToken.json\";\n// 链接上测试网的环境\n\nexport default {\n  __name: 'App',\n  setup: function setup(__props, _ref) {\n    var expose = _ref.expose;\n    expose();\n    var geerliWS = \"wss://goerli.infura.io/ws/v3/e4f789009c9245eeaad1d93ce9d059bb\";\n    var web3 = new Web3(Web3.givenProvider || geerliWS);\n    var mtcContract = new web3.eth.Contract(mtcJSON.abi, \"0xC61fDBE0f2C0e251aCb4c5966B9D240B9E455F6c\");\n\n    // 代币信息\n    var name = ref(\"\");\n    var symbol = ref(\"\");\n    var totalSupply = ref(\"\");\n    var balanceOf = ref(0);\n    var currentAccount = ref(\"\");\n\n    // 转账信息\n    var toAdrress = ref(\"\");\n    var amount = ref(\"\");\n    var getCoinInfo = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var account;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return web3.eth.requestAccounts();\n            case 2:\n              account = _context.sent;\n              currentAccount.value = account;\n              _context.next = 6;\n              return mtcContract.methods.name().call();\n            case 6:\n              name.value = _context.sent;\n              _context.next = 9;\n              return mtcContract.methods.symbol().call();\n            case 9:\n              symbol.value = _context.sent;\n              _context.next = 12;\n              return mtcContract.methods.totalSupply().call();\n            case 12:\n              totalSupply.value = _context.sent;\n              _context.next = 15;\n              return mtcContract.methods.balanceOf(account[0]).call();\n            case 15:\n              balanceOf.value = _context.sent;\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function getCoinInfo() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    var ts = computed(function () {\n      return web3.utils.fromWei(totalSupply.value, \"ether\");\n    });\n    var bo = computed(function () {\n      return web3.utils.fromWei(String(balanceOf.value), \"ether\");\n    });\n    onMounted(function () {\n      getCoinInfo();\n    });\n    var send = function send() {\n      var weiAmount = web3.utils.toWei(amount.value, \"ether\");\n      mtcContract.methods.transfer(toAdrress.value, weiAmount).send({\n        from: currentAccount.value[0]\n      }).on(\"receipt\", function (res) {\n        console.log(\"交易成功！\");\n        console.log(res);\n      });\n    };\n    var __returned__ = {\n      geerliWS: geerliWS,\n      web3: web3,\n      mtcContract: mtcContract,\n      name: name,\n      symbol: symbol,\n      totalSupply: totalSupply,\n      balanceOf: balanceOf,\n      currentAccount: currentAccount,\n      toAdrress: toAdrress,\n      amount: amount,\n      getCoinInfo: getCoinInfo,\n      ts: ts,\n      bo: bo,\n      send: send,\n      ref: ref,\n      onMounted: onMounted,\n      computed: computed,\n      get Web3() {\n        return Web3;\n      },\n      get mtcJSON() {\n        return mtcJSON;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","onMounted","computed","Web3","mtcJSON","geerliWS","web3","givenProvider","mtcContract","eth","Contract","abi","name","symbol","totalSupply","balanceOf","currentAccount","toAdrress","amount","getCoinInfo","requestAccounts","account","value","methods","call","ts","utils","fromWei","bo","String","send","weiAmount","toWei","transfer","from","on","res","console","log"],"sources":["/Users/bowensong/Desktop/前端代码/src/App.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted, computed } from \"vue\";\nimport Web3 from \"web3\";\nimport mtcJSON from \"./contracts/MyToken.json\";\n// 链接上测试网的环境\nconst geerliWS =\n  \"wss://goerli.infura.io/ws/v3/e4f789009c9245eeaad1d93ce9d059bb\";\nconst web3 = new Web3(Web3.givenProvider || geerliWS);\n\nconst mtcContract = new web3.eth.Contract(\n  mtcJSON.abi,\n  \"0xC61fDBE0f2C0e251aCb4c5966B9D240B9E455F6c\"\n);\n\n// 代币信息\nconst name = ref(\"\");\nconst symbol = ref(\"\");\nconst totalSupply = ref(\"\");\nconst balanceOf = ref(0);\nconst currentAccount = ref(\"\");\n\n// 转账信息\nconst toAdrress = ref(\"\");\nconst amount = ref(\"\");\n\nconst getCoinInfo = async () => {\n  const account = await web3.eth.requestAccounts();\n  currentAccount.value = account;\n\n  name.value = await mtcContract.methods.name().call();\n  symbol.value = await mtcContract.methods.symbol().call();\n  totalSupply.value = await mtcContract.methods.totalSupply().call();\n  balanceOf.value = await mtcContract.methods.balanceOf(account[0]).call();\n};\n\nconst ts = computed(() => {\n  return web3.utils.fromWei(totalSupply.value, \"ether\");\n});\nconst bo = computed(() => {\n  return web3.utils.fromWei(String(balanceOf.value), \"ether\");\n});\n\nonMounted(() => {\n  getCoinInfo();\n});\n\nconst send = () => {\n  const weiAmount = web3.utils.toWei(amount.value, \"ether\");\n  mtcContract.methods\n    .transfer(toAdrress.value, weiAmount)\n    .send({\n      from: currentAccount.value[0],\n    })\n    .on(\"receipt\", (res) => {\n      console.log(\"交易成功！\");\n      console.log(res);\n    });\n};\n</script>\n\n<template>\n  <h1>RABTC基本信息：</h1>\n  <hr />\n  <p>当前账号：{{ currentAccount }}</p>\n  <p>代币名称：{{ name }}</p>\n  <p>代币标识：{{ symbol }}</p>\n  <p>发行量：{{ ts }}</p>\n  <p>持有数量：{{ bo }}</p>\n  <h1>转账操作：</h1>\n  <hr />\n  <p>转入地址：<input type=\"text\" v-model=\"toAdrress\" class=\"address\" /></p>\n  <p>转出金额：<input type=\"text\" v-model=\"amount\" /> R</p>\n  <button @click=\"send\">开始转账</button>\n  0xC76E9893BB9a75730Fc61d0169241fD80AD644f6\n</template>\n\n<style lang=\"less\">\n.address {\n  width: 500px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}