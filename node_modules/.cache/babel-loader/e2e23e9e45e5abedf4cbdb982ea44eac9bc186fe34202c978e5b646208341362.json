{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nvar _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"RABTC基本信息：\", -1 /* HOISTED */);\nvar _hoisted_2 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */);\nvar _hoisted_3 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"转账操作：\", -1 /* HOISTED */);\nvar _hoisted_4 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _hoisted_2, _createElementVNode(\"p\", null, \"当前账号：\" + _toDisplayString($setup.currentAccount), 1 /* TEXT */), _createElementVNode(\"p\", null, \"代币名称：\" + _toDisplayString($setup.name), 1 /* TEXT */), _createElementVNode(\"p\", null, \"代币标识：\" + _toDisplayString($setup.symbol), 1 /* TEXT */), _createElementVNode(\"p\", null, \"发行量：\" + _toDisplayString($setup.ts), 1 /* TEXT */), _createElementVNode(\"p\", null, \"持有数量：\" + _toDisplayString($setup.bo), 1 /* TEXT */), _hoisted_3, _hoisted_4, _createElementVNode(\"p\", null, [_createTextVNode(\"转入地址：\"), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n      return $setup.toAdrress = $event;\n    }),\n    \"class\": \"address\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.toAdrress]])]), _createElementVNode(\"p\", null, [_createTextVNode(\"转出金额：\"), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n      return $setup.amount = $event;\n    })\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.amount]]), _createTextVNode(\" R\")]), _createElementVNode(\"button\", {\n    onClick: $setup.send\n  }, \"开始转账\"), _createTextVNode(\" 0xC76E9893BB9a75730Fc61d0169241fD80AD644f6 \")], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":";;8BA8DEA,oBAAmB,YAAf,YAAU;8BACdA,oBAAM;8BAMNA,oBAAc,YAAV,OAAK;8BACTA,oBAAM;;;6DARNC,UAAmB,EACnBC,UAAM,EACNF,oBAAgC,WAA7B,OAAK,oBAAGG,qBAAc,kBACzBH,oBAAsB,WAAnB,OAAK,oBAAGG,WAAI,kBACfH,oBAAwB,WAArB,OAAK,oBAAGG,aAAM,kBACjBH,oBAAmB,WAAhB,MAAI,oBAAGG,SAAE,kBACZH,oBAAoB,WAAjB,OAAK,oBAAGG,SAAE,kBACbC,UAAc,EACdC,UAAM,EACNL,oBAAqE,6BAAlE,OAAK,uCAAyD;IAAlDM,IAAI,EAAC,MAAM;;aAAUH,gBAAS;IAAA;IAAE,SAAM;iDAAjBA,gBAAS,OAC7CH,oBAAoD,6BAAjD,OAAK,uCAAsC;IAA/BM,IAAI,EAAC,MAAM;;aAAUH,aAAM;IAAA;iDAANA,aAAM,sBAAI,IAAE,KAChDH,oBAAmC;IAA1BO,OAAK,EAAEJ;EAAI,GAAE,MAAI,oBAAS","names":["_createElementVNode","_hoisted_1","_hoisted_2","$setup","_hoisted_3","_hoisted_4","type","onClick"],"sourceRoot":"","sources":["/Users/bowensong/Desktop/前端代码/src/App.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted, computed } from \"vue\";\nimport Web3 from \"web3\";\nimport mtcJSON from \"./contracts/MyToken.json\";\n// 链接上测试网的环境\nconst geerliWS =\n  \"wss://goerli.infura.io/ws/v3/e4f789009c9245eeaad1d93ce9d059bb\";\nconst web3 = new Web3(Web3.givenProvider || geerliWS);\n\nconst mtcContract = new web3.eth.Contract(\n  mtcJSON.abi,\n  \"0xC61fDBE0f2C0e251aCb4c5966B9D240B9E455F6c\"\n);\n\n// 代币信息\nconst name = ref(\"\");\nconst symbol = ref(\"\");\nconst totalSupply = ref(\"\");\nconst balanceOf = ref(0);\nconst currentAccount = ref(\"\");\n\n// 转账信息\nconst toAdrress = ref(\"\");\nconst amount = ref(\"\");\n\nconst getCoinInfo = async () => {\n  // 获取当前账号链接\n  const account = await web3.eth.requestAccounts();\n  currentAccount.value = account;\n\n  name.value = await mtcContract.methods.name().call();\n  symbol.value = await mtcContract.methods.symbol().call();\n  totalSupply.value = await mtcContract.methods.totalSupply().call();\n  balanceOf.value = await mtcContract.methods.balanceOf(account[0]).call();\n};\n\nconst ts = computed(() => {\n  return web3.utils.fromWei(totalSupply.value, \"ether\");\n});\nconst bo = computed(() => {\n  return web3.utils.fromWei(String(balanceOf.value), \"ether\");\n});\n\nonMounted(() => {\n  getCoinInfo();\n});\n\nconst send = () => {\n  const weiAmount = web3.utils.toWei(amount.value, \"ether\");\n  mtcContract.methods\n    .transfer(toAdrress.value, weiAmount)\n    .send({\n      from: currentAccount.value[0],\n    })\n    .on(\"receipt\", (res) => {\n      console.log(\"交易成功！\");\n      console.log(res);\n    });\n};\n</script>\n\n<template>\n  <h1>RABTC基本信息：</h1>\n  <hr />\n  <p>当前账号：{{ currentAccount }}</p>\n  <p>代币名称：{{ name }}</p>\n  <p>代币标识：{{ symbol }}</p>\n  <p>发行量：{{ ts }}</p>\n  <p>持有数量：{{ bo }}</p>\n  <h1>转账操作：</h1>\n  <hr />\n  <p>转入地址：<input type=\"text\" v-model=\"toAdrress\" class=\"address\" /></p>\n  <p>转出金额：<input type=\"text\" v-model=\"amount\" /> R</p>\n  <button @click=\"send\">开始转账</button>\n  0xC76E9893BB9a75730Fc61d0169241fD80AD644f6\n</template>\n\n<style lang=\"less\">\n.address {\n  width: 500px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}